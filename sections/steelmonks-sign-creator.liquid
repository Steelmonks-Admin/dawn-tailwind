{% comment %} * Schema {% endcomment %}
{% schema %}
{
  "name": "Steelmonks Sign Creator",
  "settings": [
    {
      "type": "header",
      "content": "General Settings"
    },
    {
      "type": "checkbox",
      "id": "show_reset_button",
      "label": "Show Reset Button",
      "default": true,
      "info": "Shows a reset button at the bottom of the sign creator if users get stuck."
    },
    {
      "type": "header",
      "content": "Open Button"
    },
    {
      "type": "text",
      "id": "open_button_text",
      "label": "Open Button Text",
      "default": "In die Werkstatt",
      "info": "Text displayed on the button that opens the sign creator. Appears at the bottom of the page."
    },
    {
      "type": "header",
      "content": "Status Pill"
    },
    {
      "type": "text",
      "id": "status_pill_ready",
      "label": "Status Pill - Ready Text",
      "default": "Bereit",
      "info": "Text displayed in the status pill when the creator is ready. Appears at the top of the creator interface."
    },
    {
      "type": "header",
      "content": "Page 1 - Configuration"
    },
    {
      "type": "text",
      "id": "page1_heading",
      "label": "Page 1 Heading",
      "default": "Design konfigurieren",
      "info": "Main heading on the first page of the sign creator where users configure their design."
    },
    {
      "type": "text",
      "id": "motiv_description_label",
      "label": "Motiv Description Label",
      "default": "Motiv Beschreibung",
      "info": "Label for the description textarea field on page 1."
    },
    {
      "type": "text",
      "id": "required_field_note",
      "label": "Required Field Note",
      "default": "Pflichtfeld",
      "info": "Note text shown next to required fields (e.g., 'Pflichtfeld')."
    },
    {
      "type": "text",
      "id": "motiv_description_placeholder",
      "label": "Motiv Description Placeholder",
      "default": "Lass Deiner Vorstellung freien Lauf...",
      "info": "Placeholder text in the description textarea field on page 1."
    },
    {
      "type": "text",
      "id": "upload_label",
      "label": "Upload Label",
      "default": "Motiv hochladen",
      "info": "Label for the file upload field on page 1."
    },
    {
      "type": "text",
      "id": "upload_file_types_note",
      "label": "Upload File Types Note",
      "default": "PNG oder JPG",
      "info": "Note text showing accepted file types for upload (e.g., 'PNG oder JPG')."
    },
    {
      "type": "text",
      "id": "file_choose_text",
      "label": "File Choose Text",
      "default": "Datei wählen",
      "info": "Text displayed in the file upload UI when no file is selected (page 1)."
    },
    {
      "type": "text",
      "id": "file_no_upload_text",
      "label": "File No Upload Text",
      "default": "Noch kein Upload",
      "info": "Text shown when no file has been uploaded yet (page 1)."
    },
    {
      "type": "text",
      "id": "file_upload_chip",
      "label": "File Upload Chip Text",
      "default": "Upload",
      "info": "Text on the upload chip/button in the file upload UI (page 1)."
    },
    {
      "type": "text",
      "id": "finish_label",
      "label": "Finish/Surface Label",
      "default": "Oberfläche",
      "info": "Label for the finish/surface select dropdown on page 1."
    },
    {
      "type": "text",
      "id": "type_label",
      "label": "Type/Style Label",
      "default": "Stil",
      "info": "Label for the type/style select dropdown on page 1."
    },
    {
      "type": "text",
      "id": "create_design_button",
      "label": "Create Design Button Text",
      "default": "Entwurf erstellen",
      "info": "Text on the main CTA button on page 1 that starts the design creation process."
    },
    {
      "type": "header",
      "content": "Page 2 - Preview"
    },
    {
      "type": "text",
      "id": "preview_empty_state",
      "label": "Preview Empty State Text",
      "default": "Starte zuerst den Entwurf",
      "info": "Text shown in the preview area on page 2 when no design has been created yet."
    },
    {
      "type": "text",
      "id": "share_button_text",
      "label": "Share Button Text",
      "default": "Teilen",
      "info": "Text on the share button in the preview actions on page 2."
    },
    {
      "type": "text",
      "id": "download_button_text",
      "label": "Download Button Text",
      "default": "Download",
      "info": "Text on the download button in the preview actions on page 2."
    },
    {
      "type": "text",
      "id": "back_to_config_button",
      "label": "Back to Configuration Button Text",
      "default": "← Konfiguration",
      "info": "Text on the back button that returns to page 1 from page 2."
    },
    {
      "type": "text",
      "id": "continue_button_text",
      "label": "Continue Button Text",
      "default": "Weiter →",
      "info": "Text on the continue button that proceeds from page 2 to page 3."
    },
    {
      "type": "header",
      "content": "Page 3 - Result & Checkout"
    },
    {
      "type": "text",
      "id": "product_name",
      "label": "Product Name",
      "default": "Dein personalisiertes Schild",
      "info": "Default product name displayed on page 3 in the result section."
    },
    {
      "type": "text",
      "id": "size_label",
      "label": "Size Label",
      "default": "Größe",
      "info": "Label for the size select dropdown on page 3."
    },
    {
      "type": "text",
      "id": "mounting_label",
      "label": "Mounting/Befestigung Label",
      "default": "Befestigung: ",
      "info": "Label for the mounting/fastening select dropdown on page 3."
    },
    {
      "type": "text",
      "id": "mounting_no_option",
      "label": "Mounting - No Option Text",
      "default": "Kein Befestigungssatz",
      "info": "Text for the 'no mounting' option in the mounting select on page 3."
    },
    {
      "type": "text",
      "id": "mounting_with_option",
      "label": "Mounting - With Option Text",
      "default": "Unsichtbare Befestigung (+€9,45)",
      "info": "Text for the 'with mounting' option in the mounting select on page 3."
    },
    {
      "type": "text",
      "id": "note_label",
      "label": "Note/Anmerkung Label",
      "default": "Anmerkung zum Design",
      "info": "Label for the note/comment textarea field on page 3."
    },
    {
      "type": "text",
      "id": "optional_note",
      "label": "Optional Note Text",
      "default": "Optional",
      "info": "Note text shown next to optional fields (e.g., 'Optional')."
    },
    {
      "type": "text",
      "id": "note_placeholder",
      "label": "Note Placeholder Text",
      "default": "Hast du noch Wünsche oder Anmerkungen?",
      "info": "Placeholder text in the note textarea field on page 3."
    },
    {
      "type": "text",
      "id": "price_label",
      "label": "Price Label",
      "default": "Preis",
      "info": "Label for the price display on page 3."
    },
    {
      "type": "text",
      "id": "add_to_cart_button",
      "label": "Add to Cart Button Text",
      "default": "in den Warenkorb",
      "info": "Text on the button that adds the product to cart on page 3."
    },
    {
      "type": "text",
      "id": "start_over_button",
      "label": "Start Over Button Text",
      "default": "Neu anfangen",
      "info": "Text on the button that resets and starts over from page 3."
    },
    {
      "type": "header",
      "content": "Reset Button"
    },
    {
      "type": "text",
      "id": "reset_button_text",
      "label": "Reset Button Text",
      "default": "Hängt es? Neu anfangen",
      "info": "Text on the reset button that appears at the bottom if 'Show Reset Button' is enabled."
    },
    {
      "type": "header",
      "content": "Confirmation Popup"
    },
    {
      "type": "text",
      "id": "confirmation_popup_heading",
      "label": "Confirmation Popup Heading",
      "default": "Dein Schild ist erstellt!",
      "info": "Heading text in the confirmation popup that appears after adding to cart."
    },
    {
      "type": "text",
      "id": "confirmation_popup_text",
      "label": "Confirmation Popup Text",
      "default": "Dein Unikat wurde erfolgreich zum Warenkorb hinzugefügt.",
      "info": "Body text in the confirmation popup that appears after adding to cart."
    },
    {
      "type": "text",
      "id": "continue_shopping_button",
      "label": "Continue Shopping Button Text",
      "default": "Weiter einkaufen",
      "info": "Text on the 'continue shopping' button in the confirmation popup."
    },
    {
      "type": "text",
      "id": "go_to_cart_button",
      "label": "Go to Cart Button Text",
      "default": "Zum Warenkorb",
      "info": "Text on the 'go to cart' button in the confirmation popup."
    },
    {
      "type": "header",
      "content": "Timer"
    },
    {
      "type": "text",
      "id": "timer_label",
      "label": "Timer Label",
      "default": "Geschätzte Zeit",
      "info": "Label text for the estimated time timer that appears during design creation."
    },
    {
      "type": "header",
      "content": "Info Modal"
    },
    {
      "type": "text",
      "id": "info_modal_title",
      "label": "Info Modal Title",
      "info": "The info modal will not be displayed if the title is blank. Title appears at the top of the info modal popup."
    },
    {
      "type": "richtext",
      "id": "info_modal_richtext_content1",
      "label": "Info Modal Richtext Content 1",
      "default": "<p>Dies ist die Info-Modal.</p>",
      "info": "First richtext content block in the info modal. Appears after the title."
    },
    {
      "type": "image_picker",
      "id": "info_modal_image1",
      "label": "Info Modal Image 1",
      "info": "First image in the info modal. Appears after the first richtext content block."
    },
    {
      "type": "richtext",
      "id": "info_modal_richtext_content2",
      "label": "Info Modal Richtext Content 2",
      "default": "<p>Dies ist die Info-Modal.</p>",
      "info": "Second richtext content block in the info modal. Appears after the first image."
    },
    {
      "type": "image_picker",
      "id": "info_modal_image2",
      "label": "Info Modal Image 2",
      "info": "Second image in the info modal. Appears after the second richtext content block."
    }
  ]
}
{% endschema %}

{% comment %} * Variables {% endcomment %}
{% assign sid = section.id %}

{% comment %} * Assets {% endcomment %}
{{ 'steelmonks-sign-creator.css' | asset_url | stylesheet_tag }}
<script>
  var sid = '{{ sid }}';
</script>
<script src='{{ 'steelmonks-sign-creator-copy.js' | asset_url }}' defer='defer'></script>

{% comment %} * HTML Markup {% endcomment %}
{% comment %} ! Open button {% endcomment %}
<div class='twcss-fixed twcss-w-full twcss-flex twcss-gap-4 twcss-items-center twcss-justify-center twcss-bottom-0 twcss-z-10 twcss-py-4'>
  <span class='twcss-bg-brandblack/70 twcss-text-brandwhite twcss-py-3 twcss-px-4 twcss-rounded-full twcss-text-sm'
    >→</span
  >
  <div class='werkstatt-shadow-wrap twcss-w-fit'>
    <button
      id='smc-open-btn'
      class='werkstatt-btn twcss-py-3 twcss-px-5 twcss-border-transparent twcss-bg-brandblack hover:twcss-bg-brandblack/50 twcss-transition-all twcss-duration-300 twcss-text-brandwhite twcss-shadow-xl hover:twcss-shadow-brandblack/25 twcss-rounded-full twcss-text-lg twcss-relative twcss-z-10'
    >
      {{ section.settings.open_button_text | default: 'In die Werkstatt' }}
    </button>
  </div>
  <span class='twcss-bg-brandblack/70 twcss-text-brandwhite twcss-py-3 twcss-px-4 twcss-rounded-full twcss-text-sm'
    >←</span
  >
</div>

{% comment %} ! Main container {% endcomment %}
<section
  id='smc-container'
  class='smc'
  aria-label='Steelmonks Creator'
  style='opacity: 0; visibility: hidden;'
>
  {% comment %} ! CLOSE BUTTON + INFO BUTTON {% endcomment %}
  <div class='twcss-absolute twcss-top-8 twcss-right-8 twcss-flex twcss-gap-4'>
    {% unless section.settings.info_modal_title == blank %}
      <button
        data-info-button
        class='twcss-flex-2 twcss-bg-[#ebebfff5] twcss-text-gray-700 twcss-border-2 twcss-border-brandblue twcss-p-4 md:twcss-p-8 twcss-shadow-xl twcss-rounded-full twcss-text-lg md:twcss-text-4xl twcss-z-10 twcss-transition-all hover:twcss-bg-brandblack hover:twcss-text-brandwhite twcss-duration-300 hover:twcss-border-gray-600'
      >
        <div class='twcss-leading-3 twcss-w-3 md:twcss-leading-6 md:twcss-w-6'>i</div>
      </button>
    {%- endunless %}
    <button
      data-close-button
      class='twcss-flex-2 twcss-bg-[#fafafff5] twcss-text-gray-700 twcss-border-2 twcss-border-gray-500 twcss-p-4 md:twcss-p-8 twcss-shadow-xl twcss-rounded-full twcss-text-lg md:twcss-text-4xl twcss-z-10 twcss-transition-all hover:twcss-bg-brandblack hover:twcss-text-brandwhite twcss-duration-300 hover:twcss-border-gray-600'
    >
      <div class='twcss-leading-3 twcss-w-3 md:twcss-leading-6 md:twcss-w-6'>&times;</div>
    </button>
  </div>

  {% comment %} ! INFO MODAL {% endcomment %}
  {% unless section.settings.info_modal_title == blank %}
    <div
      id='smc-info-modal'
      class='twcss-fixed twcss-top-0 twcss-left-0 twcss-w-full twcss-h-full twcss-bg-brandblack/50 twcss-z-50 twcss-flex twcss-items-center twcss-justify-center hidden twcss-shadow-2xl'
    >
      <div class='twcss-relative twcss-max-h-[90dvh] twcss-max-w-[90dvw] md:twcss-max-w-[450px] twcss-bg-brandwhite twcss-p-8 twcss-rounded-xl twcss-shadow-xl twcss-overflow-y-scroll twcss-flex twcss-flex-col twcss-gap-2'>
        <button
          data-info-button
          class='twcss-absolute twcss-top-4 twcss-right-4 twcss-flex-2 twcss-bg-[#fafafff5] twcss-text-gray-700 twcss-border-2 twcss-border-gray-500 twcss-p-4 twcss-shadow-xl twcss-rounded-full twcss-text-lg twcss-z-10 twcss-transition-all hover:twcss-bg-brandblack hover:twcss-text-brandwhite twcss-duration-300 hover:twcss-border-gray-600'
        >
          <div class='twcss-leading-3 twcss-w-3'>&times;</div>
        </button>
        <h2 class='twcss-text-xl twcss-font-bold twcss-mb-4'>{{ section.settings.info_modal_title }}</h2>
        {% if section.settings.info_modal_richtext_content1 != blank %}
          <div class='twcss-text-gray-700 twcss-text-base'>{{ section.settings.info_modal_richtext_content1 }}</div>
        {% endif %}
        {% if section.settings.info_modal_image1 != blank %}
          <img
            src='{{ section.settings.info_modal_image1 | image_url: width: 600 }}'
            alt='Info Modal 1'
            class='twcss-w-full twcss-h-auto twcss-my-4 twcss-rounded-xl twcss-border-2 twcss-border-gray-500 twcss-shadow-xl'
            width='600'
            height='400'
          >
        {% endif %}
        {% if section.settings.info_modal_richtext_content2 != blank %}
          <div class='twcss-text-gray-700 twcss-text-base'>{{ section.settings.info_modal_richtext_content2 }}</div>
        {% endif %}
        {% if section.settings.info_modal_image2 != blank %}
          <img
            src='{{ section.settings.info_modal_image2 | image_url: width: 600 }}'
            alt='Info Modal 2'
            class='twcss-w-full twcss-h-auto twcss-my-4 twcss-rounded-xl twcss-border-2 twcss-border-gray-500 twcss-shadow-xl'
            width='600'
            height='400'
          >
        {% endif %}
      </div>
    </div>
  {% endunless %}

  {% comment %} ! Navigation & Status Pill {% endcomment %}
  <div class='twcss-flex twcss-gap-4 twcss-justify-center twcss-relative twcss-z-20'>
    {% comment %} ! STATUS PILL {% endcomment %}
    <div
      id='smc-pill'
      data-state='idle'
      aria-live='polite'
      class='twcss-inline-flex twcss-items-center twcss-justify-center twcss-gap-4 twcss-py-3 twcss-px-5 twcss-rounded-full twcss-bg-[rgba(250,250,255,0.92)] twcss-text-[color:var(--smc-ink)] twcss-font-black twcss-uppercase twcss-tracking-[0.12em] twcss-text-[0.86rem] twcss-shadow-[0_18px_42px_rgba(0,0,0,0.12)] twcss-border-[2px] twcss-border-[var(--smc-gold)] twcss-relative'
    >
      <span
        aria-hidden='true'
        class='twcss-w-[10px] twcss-h-[10px] twcss-rounded-full twcss-bg-[var(--smc-gold)] twcss-shadow-[0_0_0_4px_rgba(200,164,93,0.22)] twcss-animate-pulse'
      ></span>
      <span id='smc-pill-text'>{{ section.settings.status_pill_ready | default: 'Bereit' }}</span>
      <span aria-hidden='true' class='twcss-hidden twcss-w-[18px] twcss-h-[10px]'></span>
    </div>
  </div>

  {% comment %} ! Main content (SMC) {% endcomment %}
  <div
    id='smc'
  >
    {% comment %} ! SLIDER CONTAINER {% endcomment %}
    <div
      id='smc-slider'
      class='twcss-flex twcss-items-start twcss-w-full twcss-h-full twcss-transition-transform twcss-duration-500 twcss-ease-in-out'
      style='transform: translateX(-100%);'
    >
      {% comment %} ! Page 1: Configuration {% endcomment %}
      <div
        id='smc-page-1'
        class='twcss-w-full twcss-flex twcss-items-center twcss-justify-center twcss-flex-shrink-0 twcss-px-4'
      >
        <div class='smc__wrap twcss-rounded-[20px] twcss-px-6 twcss-py-12 md:twcss-p-16 twcss-bg-[#fafafff5] twcss-min-w-[300px] md:twcss-min-w-[460px]'>
          <h2 class='twcss-text-3xl twcss-font-bold twcss-mb-8 twcss-text-center twcss-text-brandblack'>
            {{ section.settings.page1_heading | default: 'Design konfigurieren' }}
          </h2>

          {% comment %} Form container for data persistence and semantic HTML {% endcomment %}
          {% comment %} Form submission is handled by JavaScript to show confirmation popup {% endcomment %}
          <form
            method='post'
            action='{{ routes.cart_add_url }}'
            enctype='multipart/form-data'
            class='smc__form'
            id='smc-form'
          >

          {% comment %} ! Prompt Textarea Field {% endcomment %}
          <div class='smc__field'>
            <label class='smc__label twcss-block twcss-font-bold' for='smc-desc'>
              {{ section.settings.motiv_description_label | default: 'Motiv Beschreibung' }}
              <span class='smc__label-note twcss-text-sm twcss-opacity-60 twcss-font-normal'>{{ section.settings.required_field_note | default: 'Pflichtfeld' }}</span>
            </label>
            <textarea
              id='smc-desc'
              class='smc__textarea twcss-w-full twcss-p-4 twcss-rounded-xl twcss-border twcss-border-gray-300 twcss-min-h-[120px] twcss-max-h-[260px]'
              rows='5'
              placeholder='{{ section.settings.motiv_description_placeholder | default: "Lass Deiner Vorstellung freien Lauf..." }}'
            ></textarea>
          </div>

          {% comment %} ! Upload Field {% endcomment %}
          <div class='smc__field'>
            <label class='smc__label twcss-block twcss-font-bold' for='smc-upload'>
              {{ section.settings.upload_label | default: 'Motiv hochladen' }}
              <span class='smc__label-note twcss-text-sm twcss-opacity-60 twcss-font-normal'>{{ section.settings.upload_file_types_note | default: 'PNG oder JPG' }}</span>
            </label>

            <div class='smc__file twcss-relative'>
              <input
                type='file'
                id='smc-upload'
                class='smc__file-input twcss-hidden'
                accept='image/jpg, image/png, image/jpeg, image/webp'
              >
              <label
                for='smc-upload'
                class='smc__file-ui twcss-block twcss-w-full twcss-p-4 twcss-rounded-xl twcss-border twcss-border-dashed twcss-border-gray-400 twcss-cursor-pointer hover:twcss-bg-gray-50 twcss-transition-colors'
              >
                <div class='twcss-flex twcss-items-center twcss-gap-4 twcss-w-full'>
                  <div class='smc__file-preview twcss-w-16 twcss-h-16 twcss-bg-gray-200 twcss-rounded-lg twcss-overflow-hidden twcss-flex twcss-items-center twcss-justify-center'>
                    <img
                      id='smc-upload-preview'
                      class='smc__file-preview-img twcss-w-full twcss-h-full twcss-object-cover'
                      alt=''
                      loading='lazy'
                      style='display:none'
                      width='64px'
                      height='64px'
                    >
                    <div
                      id='smc-upload-preview-empty'
                      class='smc__file-preview-empty twcss-text-2xl twcss-text-gray-400'
                    >
                      +
                    </div>
                  </div>
                  <div class='smc__file-meta'>
                    <div class='smc__file-title twcss-font-bold'>{{ section.settings.file_choose_text | default: 'Datei wählen' }}</div>
                    <div
                      class='smc__file-sub twcss-text-sm twcss-text-gray-500 twcss-max-w-[75px] md:twcss-max-w-[150px]'
                      id='smc-upload-label'
                    >
                      {{ section.settings.file_no_upload_text | default: 'Noch kein Upload' }}
                    </div>
                  </div>
                  <span class='smc__file-chip twcss-ml-auto twcss-bg-brandblack twcss-text-white twcss-px-3 twcss-py-1 twcss-rounded-full twcss-text-xs twcss-font-bold twcss-uppercase'
                    >{{ section.settings.file_upload_chip | default: 'Upload' }}</span
                  >
                </div>
              </label>
            </div>
          </div>

          <div class='twcss-flex twcss-flex-col twcss-gap-2 twcss-mb-6 md:twcss-flex-row'>
            {% comment %} ! Material select {% endcomment %}
            <div class='twcss-flex-1'>
              <label class='smc__label twcss-block twcss-font-bold' for='smc-finish'>{{ section.settings.finish_label | default: 'Oberfläche' }}</label>
              <div class='smc__select twcss-relative'>
                <select
                  id='smc-finish'
                  class='smc__select-el twcss-w-full twcss-p-3 twcss-rounded-lg twcss-border twcss-border-gray-300 twcss-appearance-none twcss-cursor-pointer'
                >
                  <option value='Schwarz pulverbeschichtet'>Schwarz pulverbeschichtet</option>
                  <option value='Anthrazit pulverbeschichtet'>Anthrazit pulverbeschichtet</option>
                  <option value='Weiß pulverbeschichtet'>Weiß pulverbeschichtet</option>
                  <option value='Gold'>Gold</option>
                  <option value='Cortenstahl Optik'>Cortenstahl Optik</option>
                  <option value='Satinierter Edelstahl'>Satinierter Edelstahl</option>
                </select>
                <span
                  class='smc__select-arrow twcss-absolute twcss-right-3 twcss-top-1/2 twcss-translate-y-[-50%] twcss-pointer-events-none'
                  aria-hidden='true'
                  >⌄</span
                >
              </div>
            </div>
            {% comment %} ! Type select {% endcomment %}
            <div class='twcss-flex-1'>
              <label class='smc__label twcss-block twcss-font-bold' for='smc-type'>{{ section.settings.type_label | default: 'Stil' }}</label>
              <div class='smc__select twcss-relative'>
                <select
                  id='smc-type'
                  class='smc__select-el twcss-w-full twcss-p-3 twcss-rounded-lg twcss-border twcss-border-gray-300 twcss-appearance-none twcss-cursor-pointer'
                >
                  <option value='Frei'>Frei</option>
                  <option value='Personen & Tiere'>Personen & Tiere</option>
                  <option value='Fahrzeuge'>Fahrzeuge</option>
                  <option value='Hausschilder'>Hausschilder</option>
                  <option value='Wappen'>Wappen</option>
                  <option value='Logos'>Logos</option>
                </select>
                <span
                  class='smc__select-arrow twcss-absolute twcss-right-3 twcss-top-1/2 twcss-translate-y-[-50%] twcss-pointer-events-none'
                  aria-hidden='true'
                  >⌄</span
                >
              </div>
            </div>
          </div>

          {% comment %} ! CTA {% endcomment %}
          <div class='smc__actions twcss-flex twcss-gap-4 twcss-mt-2 md:twcss-mt-6 md:twcss-flex-row-reverse twcss-flex-col'>
            <div class='werkstatt-shadow-wrap twcss-flex-1'>
              <button
                type='button'
                class='werkstatt-btn twcss-w-full twcss-py-3 twcss-px-5 twcss-border-transparent twcss-bg-brandblack hover:twcss-bg-brandblack/50 twcss-transition-all twcss-duration-300 twcss-text-brandwhite twcss-shadow-xl hover:twcss-shadow-brandblack/25 twcss-rounded-full twcss-text-lg twcss-relative twcss-z-10'
                id='smc-cta-btn'
                disabled
              >
                <span class='smc__btn-label' id='smc-cta-label'>{{ section.settings.create_design_button | default: 'Entwurf erstellen' }}</span>
              </button>
            </div>
          </div>

          {% comment %} Hidden inputs for cart {% endcomment %}
          <input type='hidden' name='id' id='smc-variant-id' value=''>
          <input type='hidden' name='quantity' value='1'>
          <input type='hidden' name='properties[Bild]' id='smc-prop-img'>
          <input type='hidden' name='properties[Beschreibung]' id='smc-prop-desc'>
          <input type='hidden' name='properties[Oberfläche]' id='smc-prop-finish'>
          <input type='hidden' name='properties[Größe]' id='smc-prop-size'>
          <input type='hidden' name='properties[Route]' id='smc-prop-route'>
          <input type='hidden' name='properties[Generator ID]' id='smc-prop-gen'>
          <input type='hidden' name='properties[Preis]' id='smc-prop-price'>
          <input type='hidden' name='properties[Anmerkung]' id='smc-prop-note'>
          <input type='hidden' name='properties[Type]' id='smc-prop-type'>
          <input type='hidden' name='properties[Befestigung]' id='smc-prop-bolts'>

          {% comment %} Form is not actually submitted - JavaScript handles cart add via AJAX {% endcomment %}
          </form>
        </div>
      </div>

      {% comment %} ! Page 2: Creating (Preview Area) {% endcomment %}
      <div
        id='smc-page-2'
        class='twcss-w-full twcss-flex twcss-items-center twcss-justify-center twcss-flex-shrink-0 twcss-px-4'
      >
        <div class='smc__wrap twcss-rounded-[20px] twcss-px-6 twcss-py-12 md:twcss-p-16 twcss-bg-[#fafafff5] twcss-min-w-[300px] md:twcss-min-w-[460px]'>
          <div class='twcss-flex twcss-flex-col twcss-items-center twcss-gap-6'>
            {% comment %} ! Preview Image Container {% endcomment %}
            <div class='twcss-w-full twcss-aspect-square twcss-max-w-md twcss-bg-white twcss-rounded-xl twcss-shadow-lg twcss-overflow-hidden twcss-flex twcss-items-center twcss-justify-center twcss-relative'>
              {% comment %} Loading State {% endcomment %}
              <div
                id='smc-preview-loading'
                class='twcss-absolute twcss-rounded-xl twcss-inset-0 twcss-flex twcss-flex-col twcss-items-center twcss-justify-center twcss-bg-gray-300 twcss-border-2 twcss-border-brandblack'
              >
                <div
                  class='twcss-animate-spin twcss-rounded-full twcss-h-12 twcss-w-12 twcss-border-b-2 twcss-border-brandblack'
                  style='display: block;'
                ></div>
                {% comment %} Empty State {% endcomment %}
                <div id='smc-preview-empty' class='twcss-text-center twcss-text-gray-400 twcss-p-8'>
                  <p class='twcss-text-lg twcss-font-medium'>{{ section.settings.preview_empty_state | default: 'Starte zuerst den Entwurf' }}</p>
                </div>
              </div>

              {% comment %} Preview Image {% endcomment %}
              <img
                id='smc-preview-img'
                class='twcss-w-[300px] md:twcss-w-full twcss-h-full twcss-object-contain twcss-hidden'
                alt='Vorschau'
                loading='lazy'
                width='100%'
                height='100%'
              >
            </div>

            {% comment %} ! Action Buttons {% endcomment %}
            <div class='twcss-flex twcss-flex-col twcss-gap-4 twcss-w-full twcss-max-w-md'>
              {% comment %} Social Buttons {% endcomment %}
              <div id='smc-preview-actions' class='twcss-flex twcss-gap-4 twcss-justify-center twcss-hidden'>
                <button
                  type='button'
                  id='smc-preview-share'
                  class='link'
                  disabled
                  aria-label='Vorschau teilen'
                >
                  {{ section.settings.share_button_text | default: 'Teilen' }}
                </button>
                <button
                  type='button'
                  id='smc-preview-download'
                  class='link'
                  disabled
                  aria-label='Vorschau herunterladen'
                >
                  {{ section.settings.download_button_text | default: 'Download' }}
                </button>
              </div>

              {% comment %} Back to Configuration and Continue buttons {% endcomment %}
              <div class='twcss-flex twcss-gap-4 twcss-flex-col-reverse md:twcss-flex-row'>
                {% comment %} Back button - navigates to page 1, doesn't close modal {% endcomment %}
                <button
                  data-back-to-config
                  class='twcss-flex-2 twcss-bg-gray-200 twcss-text-gray-700 twcss-border-2 twcss-border-gray-500 twcss-py-3 twcss-px-5 twcss-shadow-xl twcss-rounded-full twcss-text-lg twcss-relative twcss-z-10 twcss-transition-all twcss-duration-300 hover:twcss-bg-gray-300 hover:twcss-border-gray-600 hover:twcss-text-gray-600'
                >
                  {{ section.settings.back_to_config_button | default: '← Konfiguration' }}
                </button>

                {% comment %} Continue button {% endcomment %}
                <div class='werkstatt-shadow-wrap twcss-flex-1'>
                  <button
                    type='button'
                    class='werkstatt-btn twcss-py-3 twcss-w-full twcss-px-5 twcss-border-transparent twcss-bg-brandblack hover:twcss-bg-brandblack/50 twcss-transition-all twcss-duration-300 twcss-text-brandwhite twcss-shadow-xl hover:twcss-shadow-brandblack/25 twcss-rounded-full twcss-text-lg twcss-relative twcss-z-10'
                    id='smc-continue-btn'
                    disabled
                  >
                    <span class='smc__btn-label' id='smc-continue-label'>{{ section.settings.continue_button_text | default: 'Weiter →' }}</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      {% comment %} ! Page 3: Result & Checkout {% endcomment %}
      <div
        id='smc-page-3'
        class='twcss-w-full twcss-flex twcss-items-center twcss-justify-center twcss-flex-shrink-0 twcss-px-4'
      >
        <div class='smc__wrap twcss-rounded-[20px] twcss-px-6 twcss-py-12 md:twcss-p-16 twcss-bg-[#fafafff5] twcss-min-w-[300px] md:twcss-min-w-[460px]'>
          {% comment %} ! Result container {% endcomment %}
          <div class='twcss-flex twcss-justify-center twcss-flex-col twcss-gap-6'>
            {% comment %} ! Small Preview + nanme, price and size columns {% endcomment %}
            <div class='twcss-flex twcss-items-center twcss-gap-4 twcss-flex-col md:twcss-flex-row'>
              {% comment %} * Small Preview {% endcomment %}
              <img
                id='smc-result-img'
                class='twcss-object-contain twcss-rounded-xl twcss-shadow-lg twcss-bg-white'
                alt='Dein Schild'
                loading='lazy'
                width='140px'
                height='140px'
              >
              {% comment %} * Name and size column {% endcomment %}
              <div>
                {% comment %} * Name {% endcomment %}
                <h3 id='smc-product-name' class='twcss-text-xl twcss-font-bold twcss-mb-2'>
                  {{ section.settings.product_name | default: 'Dein personalisiertes Schild' }}
                </h3>

                {% comment %} * Size select {% endcomment %}
                <div class='smc__field'>
                  <label class='smc__label twcss-block twcss-font-bold' for='smc-size'>{{ section.settings.size_label | default: 'Größe' }}</label>
                  <div class='smc__select twcss-relative'>
                    <select
                      id='smc-size'
                      class='smc__select-el twcss-w-full twcss-p-3 twcss-rounded-lg twcss-border twcss-border-gray-300 twcss-appearance-none twcss-cursor-pointer'
                    >
                      <option value='22,5 cm'>22,5 cm</option>
                      <option value='45 cm'>45 cm</option>
                      <option value='55 cm'>55 cm</option>
                      <option value='75 cm'>75 cm</option>
                    </select>
                    <span
                      class='smc__select-arrow twcss-absolute twcss-right-3 twcss-top-1/2 twcss-translate-y-[-50%] twcss-pointer-events-none'
                      aria-hidden='true'
                      >⌄</span
                    >
                  </div>
                </div>

                {% comment %} * Bolts / Mounting set select {% endcomment %}
                <div class='smc__field'>
                  <label class='smc__label twcss-block twcss-font-bold' for='smc-bolts'>{{ section.settings.mounting_label | default: 'Befestigung: ' }}</label>
                  <div class='smc__select twcss-relative'>
                    <select
                      id='smc-bolts'
                      class='smc__select-el twcss-w-full twcss-p-3 twcss-rounded-lg twcss-border twcss-border-gray-300 twcss-appearance-none twcss-cursor-pointer'
                    >
                      <option value='Keine Befestigung'>{{ section.settings.mounting_no_option | default: 'Kein Befestigungssatz' }}</option>
                      <option value='Befestigung'>{{ section.settings.mounting_with_option | default: 'Unsichtbare Befestigung (+€9,45)' }}</option>
                    </select>
                    <span
                      class='smc__select-arrow twcss-absolute twcss-right-3 twcss-top-1/2 twcss-translate-y-[-50%] twcss-pointer-events-none'
                      aria-hidden='true'
                      >⌄</span
                    >
                  </div>
                </div>
              </div>
            </div>

            {% comment %} ! Note Field {% endcomment %}
            <div class='smc__field'>
              <label class='smc__label twcss-block twcss-font-bold' for='smc-note'>
                {{ section.settings.note_label | default: 'Anmerkung zum Design' }}
                <span class='smc__label-note twcss-text-sm twcss-opacity-60 twcss-font-normal'>{{ section.settings.optional_note | default: 'Optional' }}</span>
              </label>
              <textarea
                id='smc-note'
                class='smc__textarea twcss-w-full twcss-p-4 twcss-rounded-xl twcss-border twcss-border-gray-300 twcss-min-h-[120px] twcss-max-h-[260px]'
                rows='3'
                placeholder='{{ section.settings.note_placeholder | default: "Hast du noch Wünsche oder Anmerkungen?" }}'
              ></textarea>
            </div>

            {% comment %} ! Price {% endcomment %}
            <div class='smc__price'>
              <span class='smc__label twcss-block twcss-font-bold'>{{ section.settings.price_label | default: 'Preis' }}</span>
              <div class='smc__price-val twcss-text-2xl twcss-font-black twcss-text-brandblack' id='smc-price'></div>
            </div>

            {% comment %} ! Actions buttons {% endcomment %}
            <div class='smc__actions twcss-flex twcss-flex-col twcss-gap-4'>
              {% comment %} Confirm button {% endcomment %}
              <div class='werkstatt-shadow-wrap twcss-flex-1' id='smc-confirm-btn-wrap'>
                <button
                  type='submit'
                  form='smc-form'
                  class='werkstatt-btn twcss-py-3 twcss-w-full twcss-px-5 twcss-border-transparent twcss-bg-brandblack hover:twcss-bg-brandblack/50 twcss-transition-all twcss-duration-300 twcss-text-brandwhite twcss-shadow-xl hover:twcss-shadow-brandblack/25 twcss-rounded-full twcss-text-lg twcss-relative twcss-z-10'
                  id='smc-confirm-btn'
                  disabled
                >
                  <span class='smc__btn-label' id='smc-continue-label'>{{ section.settings.add_to_cart_button | default: 'in den Warenkorb' }}</span>
                </button>
              </div>

              <button
                type='button'
                class='twcss-flex-2 twcss-bg-gray-200 twcss-text-gray-700 twcss-border-2 twcss-border-gray-500 twcss-py-3 twcss-px-5 twcss-shadow-xl twcss-rounded-full twcss-text-lg twcss-relative twcss-z-10 twcss-transition-all twcss-duration-300 hover:twcss-bg-gray-300 hover:twcss-border-gray-600 hover:twcss-text-gray-600'
                id='smc-back-btn'
              >
                {{ section.settings.start_over_button | default: 'Neu anfangen' }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  {% comment %} ! Got stuck? Reset button (resets all state) {% endcomment %}
  {% if section.settings.show_reset_button %}
  <div id='smc-reset-btn' class='twcss-flex twcss-text-sm twcss-text-gray-800/60 twcss-italic twcss-font-bold twcss-underline twcss-bg-gray-300 twcss-rounded-full twcss-py-2 twcss-px-4 twcss-cursor-pointer twcss-shadow-[0_18px_42px_rgba(0,0,0,0.12)] twcss-border-[2px] twcss-border-[#666]'>{{ section.settings.reset_button_text | default: 'Hängt es? Neu anfangen' }}</div>
  {% endif %}

  
  {% comment %} ! Confirmation Popup {% endcomment %}
  <div
    data-cart-confirmation-popup
    class='twcss-fixed twcss-inset-0 twcss-flex twcss-items-center twcss-justify-center twcss-z-100 '
    style='opacity: 0; visibility: hidden; transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;'
  >
    <div style="display: block;" class='twcss-absolute twcss-inset-0 twcss-bg-brandblack/35' data-cart-confirmation-popup-backdrop></div>
    <div class='twcss-relative twcss-size-4 twcss-bg-white twcss-p-8 twcss-max-w-md twcss-w-full twcss-mx-4 twcss-shadow-2xl smc__wrap twcss-rounded-[20px] twcss-px-6 twcss-py-12 md:twcss-p-16 twcss-bg-[#fafafff5] twcss-min-w-[300px] md:twcss-min-w-[460px]'>
      <h3 class='twcss-text-2xl twcss-font-bold twcss-mb-4 twcss-text-brandblack twcss-text-center'>{{ section.settings.confirmation_popup_heading | default: 'Dein Schild ist erstellt!' }}</h3>
      <p class='twcss-text-gray-700 twcss-text-sm twcss-mb-6 twcss-text-center'>{{ section.settings.confirmation_popup_text | default: 'Dein Unikat wurde erfolgreich zum Warenkorb hinzugefügt.' }}</p>
      <div class='twcss-flex twcss-flex-col md:twcss-flex-row twcss-gap-4'>
        <button
          type='button'
          data-cart-confirmation-popup-close
          class='twcss-flex-1 twcss-bg-gray-200 twcss-text-gray-700 twcss-py-3 twcss-px-6 twcss-rounded-full twcss-text-center twcss-font-bold hover:twcss-bg-gray-300 twcss-transition-colors'
        >
          {{ section.settings.continue_shopping_button | default: 'Weiter einkaufen' }}
        </button>
        <a
          href='{{ routes.cart_url }}'
          class='twcss-flex-1 twcss-flex twcss-items-center twcss-justify-center twcss-bg-brandblack twcss-text-white twcss-py-3 twcss-px-6 twcss-rounded-full twcss-text-center twcss-font-bold hover:twcss-bg-brandblack/90 twcss-transition-colors'
        >
          {{ section.settings.go_to_cart_button | default: 'Zum Warenkorb' }}
        </a>
      </div>
    </div>
  </div>
</section>


{% comment %} ! TIMER {% endcomment %}
<div class='smc__eta werkstatt-btn' id='smc-eta' style='display:none'>
  <span class='smc__eta-label' id='smc-eta-label'>{{ section.settings.timer_label | default: 'Geschätzte Zeit' }}</span>
  <span class='smc__eta-time' id='smc-eta-time'>03:00</span>
</div>
