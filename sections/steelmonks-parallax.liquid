{{ section.settings.liquid_mobile_title }}

<div
  style='display: flex; background-image: url("{{ section.settings.banner | image_url }}");'
  class='twcss-items-center twcss-relative twcss-w-full twcss-h-[250px] md:twcss-h-[300px] twcss-bg-cover twcss-bg-center twcss-brightness-120'
>
  {% comment %} overlay {% endcomment %}
  <div style='display: block;' class='twcss-absolute twcss-inset-0'></div>
  <div class='twcss-text-center twcss-w-full twcss-text-brandwhite twcss-text-4xl md:twcss-text-6xl'>
    {{ section.settings.text_on_banner }}
  </div>
</div>

<div class="twcss-max-w-[1600px] twcss-mx-auto twcss-px-6 twcss-mb-6">
  <div class="main-content-grid">
    {%- liquid
      assign title_block = "
        <div class='title-container'>
          <span class='twcss-font-semibold twcss-text-black twcss-text-2xl md:twcss-text-3xl'>
            " | append: section.settings.liquid_desktop_title | append: "
          </span>
        </div>
      "
    
      assign image_block = "
        <div class='image-container' style='text-align: " | append: section.settings.image_position | append: ";'>
          <div class='image-wrapper' style='max-width: " | append: section.settings.image_width | append: "px;'>
            <a href='" | append: section.settings.cta_link | append: "' class='twcss-block'>
              <img
                src='" | append: section.settings.image | image_url | append: "'
                width='" | append: section.settings.image_width | append: "'
                height='auto'
                loading='lazy'
                class='parallax-img'
                alt='" | append: section.settings.image.alt | default: 'Parallax image' | escape | append: "'
              >
            </a>
          </div>
        </div>
      "
    -%}

    {% if section.settings.inverse_order %}
      {{ image_block }}
      {{ title_block }}
    {% else %}
      {{ title_block }}
      {{ image_block }}
    {% endif %}
  </div>
</div>

<!-- CTA Button centered at section level -->
<div class="twcss-text-center twcss-mb-12">
  <a href='{{ section.settings.cta_link }}' class='btn btn-{{ section.settings.cta_style }}'>
    {{ section.settings.cta }}
  </a>
</div>

<style>
  .main-content-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    align-items: center;
  }

  .image-wrapper {
    display: inline-block;
    width: 100%;
  }

  .parallax-img {
    margin-top: -150px;
    margin-bottom: 30px;
    width: 100%;
    height: auto;
  }

  /* Mobile Overrides */
  @media screen and (max-width: 767px) {
    .main-content-grid {
      grid-template-columns: 1fr;
      text-align: center;
    }

    .title-container {
      order: 1;
    }

    .image-container {
      order: 2;
      text-align: center !important;
    }

    .parallax-img {
      margin-top: -130px;
      margin-bottom: 20px;
    }
  }
</style>

{% schema %}
{
  "name": "Parallax",
  "tag": "section",
  "class": "steelmonks-parallax",
  "presets": [
    {
      "name": "Parallax"
    }
  ],
  "settings": [
    {
      "type": "text",
      "id": "cta",
      "label": "CTA",
      "default": "Geschenke für Paare"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA Link"
    },
    {
      "type": "select",
      "id": "cta_style",
      "label": "CTA Style",
      "options": [
        { "value": "primary", "label": "Primary" },
        { "value": "secondary", "label": "Secondary" },
        { "value": "red", "label": "Red" }
      ],
      "default": "primary"
    },
    {
      "type": "richtext",
      "id": "liquid_mobile_title",
      "label": "Mobile Title"
    },
    {
      "type": "richtext",
      "id": "liquid_desktop_title",
      "label": "Desktop Title"
    },
    {
      "type": "checkbox",
      "id": "inverse_order",
      "label": "Inverse Order",
      "default": false
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image Position",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "right", "label": "Right" },
        { "value": "center", "label": "Center" }
      ],
      "default": "center"
    },
    {
      "type": "number",
      "id": "image_width",
      "label": "Image Width (px)",
      "default": 500
    },
    {
      "type": "richtext",
      "id": "text_on_banner",
      "label": "Text on Banner",
      "default": "<p>Jubiläumsgeschenke, Firmenschilder und Objektbeschilderung</p>"
    },
    {
      "type": "image_picker",
      "id": "banner",
      "label": "Banner"
    }
  ]
}
{% endschema %}
