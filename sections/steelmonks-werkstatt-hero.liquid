{% comment %}
  Werkstatt Hero Section
  Combines: Steelmonks Hero Hub (badge + trust row + CTA + categories + collection buttons)
  with: From this to that visual (updated, glassy, floating, mobile optimized)
{% endcomment %}

<section
  id="section-{{ section.id }}"
  class="sm-wh"
  style="padding-top: {{ section.settings.top_spacing | default: 24 }}px;"
>
  <div class="sm-wh__inner">

    {% comment %} HERO AREA {% endcomment %}
    <div class="sm-wh__hero sm-wh-animate-hero">

      {% if section.settings.badge_text %}
        <div class="sm-wh__badge">
          <span class="sm-wh__badge-pill">
            {{ section.settings.badge_text }}
          </span>
        </div>
      {% endif %}

      {% comment %} TRUST ROW {% endcomment %}
      <div class="sm-wh__trust-row">
        <div class="sm-wh__trust-item">
          <div class="sm-wh__trust-icon">üá©üá™</div>
          <div class="sm-wh__trust-text">Schneller Versand.</div>
        </div>
        <div class="sm-wh__trust-item">
          <div class="sm-wh__trust-icon">üèÖ</div>
          <div class="sm-wh__trust-text">√úber <strong>100.000+</strong> Bestellungen.</div>
        </div>
        <div class="sm-wh__trust-item">
          <div class="sm-wh__trust-icon">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
          <div class="sm-wh__trust-text"><strong>10.000+</strong> Bewertungen.</div>
        </div>
      </div>

      {% comment %} FROM THIS TO THAT (updated) {% endcomment %}
      <div
        id="smwh-fromto-{{ section.id }}"
        class="smwhft"
        data-autoplay="{{ section.settings.autoplay | json }}"
        aria-label="Von diesem Foto zu deinem Metallschild"
      >
        <div class="smwhft__head">
          <h2 class="smwhft__title">
            <span>{{ section.settings.heading }}</span>
            <span> {{ section.settings.heading_2 }}</span>
          </h2>
          <p class="smwhft__sub">{{ section.settings.subheading }}</p>
        </div>

        <div class="smwhft__card sm-wh-animate-float">
          <div class="smwhft__grid">

            {% comment %} LEFT {% endcomment %}
            <div class="smwhft__panel">
              {% if section.settings.from_image != blank %}
                <img
                  class="smwhft__img"
                  src="{{ section.settings.from_image | image_url: width: 1400 }}"
                  alt="{{ section.settings.from_image.alt | escape }}"
                  loading="lazy"
                  width="1400"
                  height="1050"
                >
              {% else %}
                <img
                  class="smwhft__img"
                  src="https://placehold.co/1400x1050"
                  alt="Placeholder"
                  loading="lazy"
                  width="1400"
                  height="1050"
                >
              {% endif %}

              <div class="smwhft__overlay" aria-hidden="true">
                <div class="smwhft__overlay-inner">
                  <span class="smwhft__badge">
                    <span class="smwhft__dot" aria-hidden="true"></span>
                    {{ section.settings.badge_left | escape }}
                  </span>
                  <div class="smwhft__cap">{{ section.settings.from_caption | escape }}</div>
                </div>
              </div>
            </div>

            {% comment %} MIDDLE {% endcomment %}
            <div class="smwhft__mid" aria-hidden="false">
              <div class="smwhft__mid-inner">
                <div class="smwhft__pill" aria-label="in 2 Minuten">
                  <span class="smwhft__pill-dot" aria-hidden="true"></span>
                  <span><b>in 2 Minuten</b></span>
                </div>

                <div class="smwhft__ring" aria-label="Processing indicator">
                  <svg viewBox="0 0 100 100" aria-hidden="true">
                    <circle class="smwhft__track" cx="50" cy="50" r="40"></circle>
                    <circle class="smwhft__prog" cx="50" cy="50" r="40"></circle>
                  </svg>
                  <div class="smwhft__time" id="smwhft-time-{{ section.id }}">02:00</div>
                </div>

                <div class="smwhft__scan" aria-hidden="true"></div>
                <div class="smwhft__status" id="smwhft-status-{{ section.id }}">Wir bauen deinen <b>Entwurf</b> ‚Ä¶</div>
              </div>
            </div>

            {% comment %} RIGHT {% endcomment %}
            <div class="smwhft__panel">
              {% if section.settings.to_image != blank %}
                <img
                  class="smwhft__img"
                  src="{{ section.settings.to_image | image_url: width: 1400 }}"
                  alt="{{ section.settings.to_image.alt | escape }}"
                  loading="lazy"
                  width="1400"
                  height="1050"
                >
              {% else %}
                <img
                  class="smwhft__img"
                  src="https://placehold.co/1400x1050"
                  alt="Placeholder"
                  loading="lazy"
                  width="1400"
                  height="1050"
                >
              {% endif %}

              <div class="smwhft__overlay" aria-hidden="true">
                <div class="smwhft__overlay-inner">
                  <span class="smwhft__badge">
                    <span class="smwhft__dot" aria-hidden="true"></span>
                    {{ section.settings.badge_right | escape }}
                  </span>
                  <div class="smwhft__cap">{{ section.settings.to_caption | escape }}</div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

      {% comment %} HERO CTA {% endcomment %}
      <div class="sm-wh__ctas">
        {% if section.settings.primary_button_link %}
          <a href="{{ section.settings.primary_button_link }}" class="sm-wh__btn sm-wh__btn--primary">
            {{ section.settings.primary_button_label }}
          </a>
        {% endif %}
      </div>

    </div>

    {% comment %} MAIN CATEGORIES {% endcomment %}
    {% if section.blocks.size > 0 %}
      <div class="sm-wh__categories-wrap sm-wh-animate-categories">
        <div class="sm-wh__categories">
          {% for block in section.blocks %}
            {% if block.type == 'main_category' %}
              <a
                href="{{ block.settings.link | default: '#' }}"
                class="sm-wh__category-card"
                {{ block.shopify_attributes }}
              >
                <div class="sm-wh__category-label">{{ block.settings.title }}</div>

                <div class="sm-wh__category-media">
                  {% if block.settings.sale_badge_text != blank %}
                    {% assign badge_color = block.settings.sale_badge_color | default: '#DC2626' %}
                    <div class="sm-wh__sale-badge" style="background: {{ badge_color }};">
                      {{ block.settings.sale_badge_text }}
                    </div>
                  {% endif %}

                  {% if block.settings.image %}
                    {{ block.settings.image | image_url: width: 700 | image_tag: loading: 'lazy', class: 'sm-wh__category-img' }}
                  {% else %}
                    <div class="sm-wh__category-placeholder">Bild w√§hlen</div>
                  {% endif %}
                </div>
              </a>
            {% endif %}
          {% endfor %}
        </div>
      </div>
    {% endif %}

    {% comment %} COLLECTION BUTTONS {% endcomment %}
    {% if section.settings.show_collection_row %}
      <div class="sm-wh__collections sm-wh-animate-collections">

        {% if section.settings.collection_fire_link %}
          <a href="{{ section.settings.collection_fire_link }}" class="sm-wh__collection-btn sm-wh__collection-btn--fire">
            <div class="sm-wh__collection-icon">üî•</div>
            <div class="sm-wh__collection-text">
              <span class="sm-wh__collection-label">{{ section.settings.collection_fire_label }}</span>
              <span class="sm-wh__collection-sub">{{ section.settings.collection_fire_sub }}</span>
            </div>
          </a>
        {% endif %}

        {% if section.settings.collection_craft_link %}
          <a href="{{ section.settings.collection_craft_link }}" class="sm-wh__collection-btn sm-wh__collection-btn--craft">
            <div class="sm-wh__collection-icon">üõ†Ô∏è</div>
            <div class="sm-wh__collection-text">
              <span class="sm-wh__collection-label">{{ section.settings.collection_craft_label }}</span>
              <span class="sm-wh__collection-sub">{{ section.settings.collection_craft_sub }}</span>
            </div>
          </a>
        {% endif %}

      </div>
    {% endif %}

  </div>
</section>

{% schema %}
{
  "name": "Werkstatt Hero Section",
  "settings": [
    {
      "type": "range",
      "id": "top_spacing",
      "label": "Abstand oben",
      "default": 24,
      "min": 0,
      "max": 160,
      "step": 4
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Black Pill Text",
      "default": "Black Friday: bis zu 50 % ‚Äì nur dieses Wochenende"
    },

    { "type": "header", "content": "From this to that" },

    {
      "type": "text",
      "id": "heading",
      "label": "Heading (left)",
      "default": "Von diesem Foto"
    },
    {
      "type": "text",
      "id": "heading_2",
      "label": "Heading (right)",
      "default": "zu deinem Metallschild"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "in 2 Minuten"
    },
    {
      "type": "text",
      "id": "badge_left",
      "label": "Left badge",
      "default": "From this"
    },
    {
      "type": "text",
      "id": "badge_right",
      "label": "Right badge",
      "default": "To this"
    },
    {
      "type": "image_picker",
      "id": "from_image",
      "label": "From image (photo reference)"
    },
    {
      "type": "textarea",
      "id": "from_caption",
      "label": "From caption",
      "default": "Lade ein Foto oder eine Skizze hoch"
    },
    {
      "type": "image_picker",
      "id": "to_image",
      "label": "To image (metal sign)"
    },
    {
      "type": "textarea",
      "id": "to_caption",
      "label": "To caption",
      "default": "Wir verwandeln es in ein sauberes, schnittf√§higes Schild"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Autoplay animation",
      "default": true
    },
    {
      "type": "range",
      "id": "duration_seconds",
      "min": 6,
      "max": 20,
      "step": 1,
      "unit": "s",
      "label": "Animation loop duration (visual)",
      "default": 10
    },

    { "type": "header", "content": "Hero Button" },

    {
      "type": "text",
      "id": "primary_button_label",
      "label": "Prim√§rer Button-Text",
      "default": "Jetzt Geschenke finden"
    },
    {
      "type": "url",
      "id": "primary_button_link",
      "label": "Prim√§rer Button-Link"
    },

    { "type": "header", "content": "Feuerwehr & Handwerker Links (unten)" },

    {
      "type": "url",
      "id": "collection_fire_link",
      "label": "Link F√ºr Feuerwehr"
    },
    {
      "type": "text",
      "id": "collection_fire_label",
      "label": "Label F√ºr Feuerwehr",
      "default": "F√ºr Feuerwehr"
    },
    {
      "type": "text",
      "id": "collection_fire_sub",
      "label": "Sub F√ºr Feuerwehr",
      "default": "Beliebte Schilder, Anh√§nger und Geschenke"
    },
    {
      "type": "url",
      "id": "collection_craft_link",
      "label": "Link F√ºr Handwerker"
    },
    {
      "type": "text",
      "id": "collection_craft_label",
      "label": "Label F√ºr Handwerker",
      "default": "F√ºr Handwerker"
    },
    {
      "type": "text",
      "id": "collection_craft_sub",
      "label": "Sub F√ºr Handwerker",
      "default": "Werkstattdeko, Schl√ºsselanh√§nger und mehr"
    },
    {
      "type": "checkbox",
      "id": "show_collection_row",
      "label": "Collection Buttons unter den Karten anzeigen",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "main_category",
      "name": "Hauptkategorie",
      "limit": 3,
      "settings": [
        { "type": "text", "id": "title", "label": "Titel", "default": "Kategorie" },
        { "type": "image_picker", "id": "image", "label": "Bild" },
        { "type": "url", "id": "link", "label": "Link" },
        { "type": "text", "id": "sale_badge_text", "label": "Sale Badge Text", "info": "Kompletter Text, z.B. ‚ÄûBis zu 30 %‚Äú" },
        { "type": "color", "id": "sale_badge_color", "label": "Sale Badge Farbe", "default": "#DC2626" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Werkstatt Hero Section",
      "category": "Steelmonks"
    }
  ]
}
{% endschema %}

{% stylesheet %}
#section-{{ section.id }}.sm-wh{
  background: #FAFAFF;
  padding: 24px 16px 40px;
  color: #090A0C;
}

#section-{{ section.id }} .sm-wh__inner{
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

#section-{{ section.id }} .sm-wh__hero{
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 18px;
}

/* Black pill */
#section-{{ section.id }} .sm-wh__badge-pill{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 18px;
  border-radius: 999px;
  background: #090A0C;
  color: #FAFAFF;
  font-size: 1.125rem;
  font-weight: 800;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  box-shadow: 0 14px 34px rgba(0,0,0,0.45);
}

#section-{{ section.id }} .sm-wh__badge-pill::before{
  content: "";
  width: 10px;
  height: 10px;
  border-radius: 999px;
  background: #ff9800;
  box-shadow: 0 0 0 4px rgba(255,152,0,0.35);
}

/* Trust row */
#section-{{ section.id }} .sm-wh__trust-row{
  width: 100%;
  max-width: 900px;
  display: grid;
  grid-template-columns: 1fr;
  gap: 12px;
  margin-top: 6px;
}

#section-{{ section.id }} .sm-wh__trust-item{
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

#section-{{ section.id }} .sm-wh__trust-icon{ font-size: 1.3rem; }
#section-{{ section.id }} .sm-wh__trust-text{
  font-size: 1.125rem;
  color: #3f3f46;
}

/* CTA */
#section-{{ section.id }} .sm-wh__ctas{
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 8px;
}

#section-{{ section.id }} .sm-wh__btn{
  padding: 11px 24px;
  border-radius: 999px;
  font-size: 1.05rem;
  font-weight: 700;
  text-decoration: none;
  border: 1px solid transparent;
  cursor: pointer;
  white-space: nowrap;
  transition: transform 160ms ease, box-shadow 160ms ease, background 160ms ease, border-color 160ms ease;
}

#section-{{ section.id }} .sm-wh__btn--primary{
  background: radial-gradient(circle at 0 0, #ff9800 0, #0044CC 45%, #00235e 100%);
  color: #FAFAFF;
  box-shadow: 0 14px 32px rgba(0,68,204,0.45);
}

#section-{{ section.id }} .sm-wh__btn--primary:hover{
  transform: translateY(-2px);
  box-shadow: 0 18px 40px rgba(0,68,204,0.60);
}

/* From to */
#smwh-fromto-{{ section.id }}{
  --ink: rgba(9,10,12,0.92);
  --muted: rgba(9,10,12,0.68);
  --stroke: rgba(9,10,12,0.12);
  --stroke2: rgba(9,10,12,0.18);
  --white: rgba(255,255,255,0.96);
  --glass: rgba(255,255,255,0.10);
  --glass2: rgba(255,255,255,0.14);
  --shadow: 0 22px 60px rgba(15,23,42,0.16);
  --shadow2: 0 14px 28px rgba(15,23,42,0.12);
  --radius: 22px;
  --radius-sm: 16px;

  --loop: {{ section.settings.duration_seconds | default: 10 }}s;

  width: 100%;
  max-width: 1020px;
}

#smwh-fromto-{{ section.id }} .smwhft__head{
  text-align: center;
  margin: 4px 0 12px;
}

#smwh-fromto-{{ section.id }} .smwhft__title{
  margin: 0;
  font-weight: 800;
  letter-spacing: -0.02em;
  color: var(--ink);
  font-size: clamp(20px, 2.4vw, 32px);
  line-height: 1.12;
}

#smwh-fromto-{{ section.id }} .smwhft__sub{
  margin: 10px 0 0;
  color: var(--muted);
  font-size: 13px;
  letter-spacing: 0.2px;
}

/* Card */
#smwh-fromto-{{ section.id }} .smwhft__card{
  border-radius: var(--radius);
  border: 1px solid var(--stroke);
  background: linear-gradient(180deg, rgba(255,255,255,0.70) 0%, rgba(255,255,255,0.50) 100%);
  box-shadow: 0 1px 0 rgba(255,255,255,0.72) inset, var(--shadow);
  overflow: hidden;
  position: relative;
  isolation: isolate;
}

#smwh-fromto-{{ section.id }} .smwhft__card::before{
  content: "";
  position: absolute;
  inset: -40%;
  background:
    radial-gradient(closest-side at 30% 30%, rgba(255,152,0,0.12), rgba(255,255,255,0) 60%),
    radial-gradient(closest-side at 70% 30%, rgba(0,68,204,0.10), rgba(255,255,255,0) 62%);
  transform: rotate(8deg);
  pointer-events: none;
}

#smwh-fromto-{{ section.id }} .smwhft__grid{
  display: grid;
  grid-template-columns: 1fr 128px 1fr;
  align-items: stretch;
}

#smwh-fromto-{{ section.id }} .smwhft__panel{
  position: relative;
  overflow: hidden;
  min-height: 300px;
}

#smwh-fromto-{{ section.id }} .smwhft__img{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transform: scale(1);
  transition: transform 520ms cubic-bezier(0.2,0.8,0.2,1), filter 320ms ease;
  will-change: transform, filter;
}

#smwh-fromto-{{ section.id }} .smwhft__panel:hover .smwhft__img{
  transform: scale(1.04);
  filter: saturate(0.95);
}

/* Overlays */
#smwh-fromto-{{ section.id }} .smwhft__overlay{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  padding: 14px;
  pointer-events: none;
  background:
    radial-gradient(120% 90% at 50% 0%, rgba(255,255,255,0.12) 0%, rgba(255,255,255,0.06) 40%, rgba(0,0,0,0.52) 100%),
    linear-gradient(180deg, rgba(0,0,0,0.02) 0%, rgba(0,0,0,0.62) 70%, rgba(0,0,0,0.82) 100%);
}

#smwh-fromto-{{ section.id }} .smwhft__overlay-inner{
  width: 100%;
  border-radius: var(--radius-sm);
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.18);
  box-shadow: 0 10px 28px rgba(0,0,0,0.20);
  padding: 10px 12px;
  color: rgba(255,255,255,0.94);
  text-shadow: 0 2px 14px rgba(0,0,0,0.45);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  display: grid;
  gap: 8px;
}

#smwh-fromto-{{ section.id }} .smwhft__badge{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 7px 10px;
  border-radius: 999px;
  background: var(--glass);
  border: 1px solid rgba(255,255,255,0.16);
  color: var(--white);
  font-size: 12px;
  line-height: 1;
  width: fit-content;
}

#smwh-fromto-{{ section.id }} .smwhft__dot{
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(255,255,255,0.78);
  box-shadow: 0 0 0 4px rgba(255,255,255,0.10);
  opacity: 0.85;
}

#smwh-fromto-{{ section.id }} .smwhft__cap{
  font-size: 12px;
  line-height: 1.35;
  letter-spacing: 0.15px;
  color: rgba(255,255,255,0.92);
  white-space: pre-wrap;
  word-break: break-word;
}

/* Middle timeline */
#smwh-fromto-{{ section.id }} .smwhft__mid{
  position: relative;
  padding: 18px 14px;
  display: grid;
  place-items: center;
  background: linear-gradient(180deg, rgba(255,255,255,0.40) 0%, rgba(255,255,255,0.22) 100%);
  border-left: 1px solid var(--stroke);
  border-right: 1px solid var(--stroke);
}

#smwh-fromto-{{ section.id }} .smwhft__mid-inner{
  width: 100%;
  display: grid;
  gap: 12px;
  justify-items: center;
}

#smwh-fromto-{{ section.id }} .smwhft__pill{
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid var(--stroke);
  background: rgba(255,255,255,0.70);
  box-shadow: 0 1px 0 rgba(255,255,255,0.70) inset, var(--shadow2);
  color: var(--ink);
  font-size: 12px;
  line-height: 1;
  user-select: none;
}

#smwh-fromto-{{ section.id }} .smwhft__pill-dot{
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: rgba(9,10,12,0.78);
  box-shadow: 0 0 0 6px rgba(9,10,12,0.08);
}

/* Progress ring */
#smwh-fromto-{{ section.id }} .smwhft__ring{
  width: 86px;
  height: 86px;
  border-radius: 999px;
  border: 1px solid var(--stroke);
  background: rgba(255,255,255,0.66);
  box-shadow: 0 1px 0 rgba(255,255,255,0.70) inset, var(--shadow2);
  display: grid;
  place-items: center;
  position: relative;
  overflow: hidden;
  transform: translateZ(0);
}

#smwh-fromto-{{ section.id }} .smwhft__ring:before{
  content: "";
  position: absolute;
  inset: 10px;
  border-radius: 999px;
  background: rgba(255,255,255,0.64);
  border: 1px solid rgba(9,10,12,0.10);
  box-shadow: 0 1px 0 rgba(255,255,255,0.7) inset;
}

#smwh-fromto-{{ section.id }} .smwhft__ring svg{
  position: absolute;
  inset: 0;
  transform: rotate(-90deg);
}

#smwh-fromto-{{ section.id }} .smwhft__ring circle{
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
}

#smwh-fromto-{{ section.id }} .smwhft__track{ stroke: rgba(9,10,12,0.12); }

#smwh-fromto-{{ section.id }} .smwhft__prog{
  stroke: rgba(9,10,12,0.86);
  stroke-dasharray: 251.2;
  stroke-dashoffset: 251.2;
  animation: smwhftRing var(--loop) linear infinite;
}

#smwh-fromto-{{ section.id }} .smwhft__time{
  position: relative;
  z-index: 1;
  color: var(--ink);
  font-weight: 800;
  letter-spacing: -0.01em;
  font-size: 14px;
}

#smwh-fromto-{{ section.id }} .smwhft__scan{
  width: 100%;
  height: 10px;
  border-radius: 999px;
  border: 1px solid rgba(9,10,12,0.12);
  background: rgba(255,255,255,0.62);
  box-shadow: 0 1px 0 rgba(255,255,255,0.70) inset;
  overflow: hidden;
  position: relative;
}

#smwh-fromto-{{ section.id }} .smwhft__scan:before{
  content: "";
  position: absolute;
  top: -40%;
  left: -30%;
  width: 40%;
  height: 180%;
  background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.60) 45%, rgba(255,255,255,0) 100%);
  transform: skewX(-18deg);
  animation: smwhftScan var(--loop) cubic-bezier(0.2,0.8,0.2,1) infinite;
  opacity: 0.95;
}

#smwh-fromto-{{ section.id }} .smwhft__status{
  font-size: 12px;
  color: var(--muted);
  letter-spacing: 0.2px;
  text-align: center;
  min-height: 18px;
}

#smwh-fromto-{{ section.id }} .smwhft__status b{ color: var(--ink); font-weight: 750; }

/* Autoplay gating */
#smwh-fromto-{{ section.id }}[data-autoplay="false"] .smwhft__prog,
#smwh-fromto-{{ section.id }}[data-autoplay="false"] .smwhft__scan:before{
  animation: none !important;
}

/* Categories */
#section-{{ section.id }} .sm-wh__categories-wrap{ margin-top: 18px; }

#section-{{ section.id }} .sm-wh__categories{
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  gap: 14px;
  padding-bottom: 10px;
}

#section-{{ section.id }} .sm-wh__category-card{
  min-width: 78%;
  scroll-snap-align: center;
  background: #ffffff;
  padding: 12px;
  border-radius: 22px;
  box-shadow: 0 14px 34px rgba(15, 23, 42, 0.10);
  border: 1px solid rgba(15, 23, 42, 0.06);
  text-decoration: none;
  color: inherit;
  transition: transform 150ms ease, box-shadow 150ms ease, border-color 150ms ease, background 150ms ease;
}

#section-{{ section.id }} .sm-wh__category-card:hover{
  transform: translateY(-3px);
  box-shadow: 0 20px 46px rgba(15, 23, 42, 0.20);
  border-color: rgba(0, 68, 204, 0.3);
  background: #fdfdfd;
}

#section-{{ section.id }} .sm-wh__category-label{
  font-size: 1.2rem;
  font-weight: 800;
  text-align: center;
  margin-bottom: 10px;
}

#section-{{ section.id }} .sm-wh__category-media{
  border-radius: 18px;
  overflow: hidden;
  position: relative;
}

#section-{{ section.id }} .sm-wh__category-img{
  width: 100%;
  display: block;
  border-radius: 18px;
}

#section-{{ section.id }} .sm-wh__category-placeholder{
  height: 140px;
  background: #E5E7EB;
  border-radius: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #555;
}

#section-{{ section.id }} .sm-wh__sale-badge{
  position: absolute;
  top: 10px;
  left: 10px;
  padding: 6px 14px;
  border-radius: 999px;
  color: #FEF2F2;
  font-size: 1.125rem;
  font-weight: 800;
  box-shadow: 0 8px 18px rgba(0,0,0,0.22);
  white-space: nowrap;
}

/* Collection buttons */
#section-{{ section.id }} .sm-wh__collections{
  display: flex;
  flex-direction: column;
  gap: 12px;
}

#section-{{ section.id }} .sm-wh__collection-btn{
  display: flex;
  align-items: center;
  gap: 10px;
  background: #FFFFFF;
  padding: 12px 16px;
  border-radius: 16px;
  text-decoration: none;
  color: inherit;
  border: 1px solid rgba(15,23,42,0.12);
  box-shadow: 0 12px 28px rgba(15,23,42,0.10);
  transition: transform 150ms ease, box-shadow 150ms ease, border-color 150ms ease, background 150ms ease;
}

#section-{{ section.id }} .sm-wh__collection-btn--fire{
  background: linear-gradient(135deg, #fff3e0, #ffffff);
}

#section-{{ section.id }} .sm-wh__collection-btn--craft{
  background: linear-gradient(135deg, #e3f2ff, #ffffff);
}

#section-{{ section.id }} .sm-wh__collection-btn:hover{
  transform: translateY(-2px);
  box-shadow: 0 18px 38px rgba(15,23,42,0.18);
  border-color: rgba(15,23,42,0.22);
}

#section-{{ section.id }} .sm-wh__collection-icon{
  width: 32px;
  height: 32px;
  background: rgba(9,10,12,0.06);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 999px;
}

#section-{{ section.id }} .sm-wh__collection-text{
  display: flex;
  flex-direction: column;
  gap: 2px;
}

#section-{{ section.id }} .sm-wh__collection-label{
  font-size: 1.05rem;
  font-weight: 800;
}

#section-{{ section.id }} .sm-wh__collection-sub{
  font-size: 0.9rem;
  opacity: 0.8;
}

/* Animations */
@keyframes smwhFadeUp{
  0%{ opacity: 0; transform: translateY(14px); }
  100%{ opacity: 1; transform: translateY(0); }
}

.sm-wh-animate-hero{ animation: smwhFadeUp 0.7s ease-out 0.05s both; }
.sm-wh-animate-categories{ animation: smwhFadeUp 0.7s ease-out 0.18s both; }
.sm-wh-animate-collections{ animation: smwhFadeUp 0.7s ease-out 0.28s both; }

@keyframes smwhFloat{
  0%{ transform: translateY(0); }
  50%{ transform: translateY(-5px); }
  100%{ transform: translateY(0); }
}

.sm-wh-animate-float{ animation: smwhFloat 7.5s ease-in-out infinite; }

#smwh-fromto-{{ section.id }} .smwhft__card:hover{
  transform: translateY(-3px);
  transition: transform 220ms ease, box-shadow 220ms ease;
  box-shadow: 0 30px 80px rgba(15,23,42,0.20);
}

/* Keyframes for visual loop */
@keyframes smwhftRing{
  0%{ stroke-dashoffset: 251.2; }
  100%{ stroke-dashoffset: 0; }
}

@keyframes smwhftScan{
  0%{ left: -45%; opacity: 0.0; }
  8%{ opacity: 0.95; }
  40%{ left: 110%; opacity: 0.95; }
  55%{ opacity: 0.0; }
  100%{ left: 110%; opacity: 0.0; }
}

/* Desktop */
@media (min-width: 768px){
  #section-{{ section.id }}.sm-wh{
    padding: 32px 24px 48px;
  }

  #section-{{ section.id }} .sm-wh__trust-row{
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
  }

  #section-{{ section.id }} .sm-wh__categories{
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    overflow: visible;
    padding-bottom: 0;
  }

  #section-{{ section.id }} .sm-wh__category-card{ min-width: 0; }

  #section-{{ section.id }} .sm-wh__collections{ flex-direction: row; }
  #section-{{ section.id }} .sm-wh__collection-btn{ flex: 1 1 0; }
}

/* Mobile polish */
@media (max-width: 900px){
  #smwh-fromto-{{ section.id }} .smwhft__grid{
    grid-template-columns: 1fr;
  }

  #smwh-fromto-{{ section.id }} .smwhft__panel{
    min-height: 220px;
  }

  #smwh-fromto-{{ section.id }} .smwhft__mid{
    padding: 14px 14px;
    border-left: 0;
    border-right: 0;
    border-top: 1px solid var(--stroke);
    border-bottom: 1px solid var(--stroke);
  }

  #smwh-fromto-{{ section.id }} .smwhft__mid-inner{
    grid-auto-flow: row;
  }

  #smwh-fromto-{{ section.id }} .smwhft__ring{
    width: 76px;
    height: 76px;
  }

  #smwh-fromto-{{ section.id }} .smwhft__scan{ height: 9px; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .sm-wh-animate-float{ animation: none !important; }
  #smwh-fromto-{{ section.id }} .smwhft__prog,
  #smwh-fromto-{{ section.id }} .smwhft__scan:before,
  #smwh-fromto-{{ section.id }} .smwhft__img{
    animation: none !important;
    transition: none !important;
  }
}
{% endstylesheet %}

{% javascript %}
(function(){
  var root = document.getElementById('smwh-fromto-{{ section.id }}');
  if(!root) return;

  var timeEl = document.getElementById('smwhft-time-{{ section.id }}');
  var statusEl = document.getElementById('smwhft-status-{{ section.id }}');
  if(!timeEl) return;

  var autoplay = root.getAttribute('data-autoplay') === 'true';
  if(!autoplay) return;

  var loopMs = ({{ section.settings.duration_seconds | default: 10 }} * 1000) || 10000;

  var labels = [
    'Wir pr√ºfen dein <b>Motiv</b> ‚Ä¶',
    'Wir bauen deinen <b>Entwurf</b> ‚Ä¶',
    'Wir optimieren die <b>Konturen</b> ‚Ä¶',
    'Wir finalisieren das <b>Schild</b> ‚Ä¶'
  ];

  function pad(n){ return (n < 10 ? '0' : '') + n; }

  function tick(){
    if(root.getAttribute('data-autoplay') !== 'true') return;

    var now = Date.now();
    var phase = (now % loopMs) / loopMs;

    var seconds = Math.max(0, Math.round(120 * (1 - phase)));
    var mm = Math.floor(seconds / 60);
    var ss = seconds % 60;
    timeEl.textContent = pad(mm) + ':' + pad(ss);

    if(statusEl){
      var idx = Math.min(labels.length - 1, Math.floor(phase * labels.length));
      statusEl.innerHTML = labels[idx];
    }

    requestAnimationFrame(tick);
  }

  requestAnimationFrame(tick);
})();
{% endjavascript %}